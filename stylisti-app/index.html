<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ú® Stylisti - Your AI Style Assistant ‚ú®</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #8B0000 0%, #A0001C 50%, #8B0000 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(160, 0, 28, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(139, 0, 0, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        /* Navigation */
        .navbar {
            background: linear-gradient(45deg, #8B0000, #DC143C);
            padding: 15px 0;
            box-shadow: 0 4px 20px rgba(139, 0, 0, 0.3);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            border-bottom: 2px solid rgba(255, 215, 0, 0.3);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo {
            background: linear-gradient(45deg, #FFD700, #DAA520);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2rem;
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);
        }

        .nav-links {
            display: flex;
            gap: 30px;
            list-style: none;
        }

        .nav-links a {
            color: #FFD700;
            text-decoration: none;
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 25px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .nav-links a:hover,
        .nav-links a.active {
            background: linear-gradient(45deg, #FFD700, #DAA520);
            color: #8B0000;
            border-color: #8B0000;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }

        /* Main Content */
        .main-content {
            margin-top: 80px;
            padding: 40px 20px;
            min-height: calc(100vh - 80px);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Page Sections */
        .page-section {
            display: none;
            background: linear-gradient(145deg, rgba(255,255,255,0.95) 0%, rgba(255,248,220,0.95) 50%, rgba(255,255,255,0.95) 100%);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 
                0 20px 40px rgba(139, 0, 0, 0.3),
                0 0 20px rgba(255, 215, 0, 0.2),
                inset 0 1px 0 rgba(255, 215, 0, 0.3);
            border: 2px solid transparent;
            background-clip: padding-box;
            position: relative;
        }

        .page-section::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #8B0000, #DAA520, #FFD700, #DC143C);
            border-radius: 22px;
            z-index: -1;
        }

        .page-section.active {
            display: block;
        }

        /* Dashboard Styles */
        .dashboard-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .dashboard-title {
            background: linear-gradient(45deg, #8B0000, #DC143C, #DAA520, #FFD700);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.1) 0%, rgba(255, 215, 0, 0.1) 100%);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid rgba(255, 215, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '‚ú®';
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.2rem;
            animation: sparkle 2s ease-in-out infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #8B0000;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-weight: 600;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .action-button {
            background: linear-gradient(135deg, #8B0000 0%, #DC143C 25%, #DAA520 75%, #FFD700 100%);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(139, 0, 0, 0.3);
            border: 2px solid rgba(255, 215, 0, 0.3);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .action-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .action-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(139, 0, 0, 0.4);
        }

        .action-button:hover::before {
            left: 100%;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-links {
                gap: 15px;
            }

            .nav-links a {
                padding: 8px 15px;
                font-size: 14px;
            }

            .dashboard-title {
                font-size: 2rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .page-section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">‚ú® Stylisti ‚ú®</div>
            <ul class="nav-links">
                <li><a href="#" class="nav-link active" data-page="dashboard">üè† Dashboard</a></li>
                <li><a href="#" class="nav-link" data-page="upload">üì∏ Upload</a></li>
                <li><a href="#" class="nav-link" data-page="gallery">üëó Gallery</a></li>
                <li><a href="#" class="nav-link" data-page="chat">ü§ñ Srusti's Stylist</a></li>
                <li><a href="#" class="nav-link" data-page="analytics">üìä Analytics</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            
            <!-- Dashboard Page -->
            <section id="dashboard" class="page-section active">
                <div class="dashboard-header">
                    <h1 class="dashboard-title">‚ú® Welcome to Stylisti ‚ú®</h1>
                    <p style="font-size: 1.2rem; color: #666; margin-bottom: 20px;">Your AI-powered personal style assistant</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="total-outfits">36</div>
                        <div class="stat-label">Total Outfits</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="this-month">12</div>
                        <div class="stat-label">This Month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="favorite-style">Chic</div>
                        <div class="stat-label">Top Style</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="confidence-score">8.5</div>
                        <div class="stat-label">Avg Confidence</div>
                    </div>
                </div>

                <div class="quick-actions">
                    <button class="action-button" onclick="showPage('upload')">
                        ‚ú®üì∏‚ú® Upload New Outfit
                    </button>
                    <button class="action-button" onclick="showPage('gallery')">
                        üëó‚ú® Browse Gallery
                    </button>
                    <button class="action-button" onclick="showPage('chat')">
                        ü§ñüí¨ Chat with Srusti
                    </button>
                    <button class="action-button" onclick="getRecommendation()">
                        üéØ‚ú® Get Recommendation
                    </button>
                </div>
            </section>

            <!-- Upload Page -->
            <section id="upload" class="page-section">
                <h2 style="text-align: center; margin-bottom: 30px; color: #8B0000; font-size: 2rem;">üì∏ Upload New Outfit</h2>
                <iframe src="/upload" style="width: 100%; height: 70vh; border: none; border-radius: 15px;"></iframe>
            </section>

            <!-- Gallery Page -->
            <section id="gallery" class="page-section">
                <h2 style="text-align: center; margin-bottom: 30px; color: #8B0000; font-size: 2rem;">üëó Your Style Gallery</h2>
                <div id="gallery-content">
                    <p style="text-align: center; color: #666;">Loading your fabulous outfits...</p>
                </div>
            </section>

            <!-- Chat Page -->
            <section id="chat" class="page-section">
                <h2 style="text-align: center; margin-bottom: 30px; color: #8B0000; font-size: 2rem;">ü§ñ Srusti's Stylist</h2>
                <div id="chat-content">
                    <p style="text-align: center; color: #666;">Initializing your AI style assistant...</p>
                </div>
            </section>

            <!-- Analytics Page -->
            <section id="analytics" class="page-section">
                <h2 style="text-align: center; margin-bottom: 30px; color: #8B0000; font-size: 2rem;">üìä Style Analytics</h2>
                <div id="analytics-content">
                    <p style="text-align: center; color: #666;">Analyzing your style patterns...</p>
                </div>
            </section>

        </div>
    </main>

    <script>
        // Navigation functionality
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-page="${pageId}"]`).classList.add('active');
            
            // Load page content if needed
            loadPageContent(pageId);
        }

        // Nav link click handlers
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const pageId = link.getAttribute('data-page');
                showPage(pageId);
            });
        });

        // Page content loaders
        function loadPageContent(pageId) {
            switch(pageId) {
                case 'gallery':
                    loadGallery();
                    break;
                case 'chat':
                    loadChat();
                    break;
                case 'analytics':
                    loadAnalytics();
                    break;
            }
        }

        function loadGallery() {
            const galleryContent = document.getElementById('gallery-content');
            galleryContent.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px;">
                    ${Array(36).fill().map((_, i) => `
                        <div style="background: linear-gradient(135deg, rgba(139, 0, 0, 0.1) 0%, rgba(255, 215, 0, 0.1) 100%); 
                                   border-radius: 15px; padding: 15px; text-align: center; border: 2px solid rgba(255, 215, 0, 0.3);">
                            <div style="width: 100%; height: 150px; background: linear-gradient(45deg, #8B0000, #DAA520); 
                                       border-radius: 10px; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                                üì∏ Outfit ${i + 1}
                            </div>
                            <p style="color: #8B0000; font-weight: 600;">Style ${Math.floor(Math.random() * 5) + 1}</p>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function loadChat() {
            const chatContent = document.getElementById('chat-content');
            chatContent.innerHTML = `
                <div style="background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,248,220,0.9) 100%); 
                           border-radius: 15px; padding: 20px; height: 60vh; display: flex; flex-direction: column;">
                    <div id="chat-messages" style="flex: 1; overflow-y: auto; margin-bottom: 20px; padding: 20px; 
                                                  background: rgba(255,255,255,0.5); border-radius: 10px;">
                        <div style="background: linear-gradient(45deg, #8B0000, #DC143C); color: #FFD700; padding: 15px; 
                                   border-radius: 15px; margin-bottom: 15px; max-width: 80%;">
                            <strong>‚ú® Srusti's Stylist:</strong><br>
                            Hello gorgeous! üí´ I'm Srusti, your AI style assistant! I've analyzed your amazing collection of 36 outfits and I'm ready to help you look absolutely stunning. What can I help you with today?
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="chat-input" placeholder="Ask me anything about your style..." 
                               style="flex: 1; padding: 15px; border: 2px solid #DAA520; border-radius: 10px; 
                                     background: rgba(255,255,255,0.9);" />
                        <button onclick="sendMessage()" style="background: linear-gradient(45deg, #8B0000, #DC143C); 
                                                             color: #FFD700; border: none; padding: 15px 25px; 
                                                             border-radius: 10px; font-weight: bold; cursor: pointer;">
                            ‚ú® Send
                        </button>
                    </div>
                </div>
            `;
        }

        function loadAnalytics() {
            const analyticsContent = document.getElementById('analytics-content');
            analyticsContent.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div style="background: linear-gradient(135deg, rgba(139, 0, 0, 0.1) 0%, rgba(255, 215, 0, 0.1) 100%); 
                               padding: 30px; border-radius: 15px; border: 2px solid rgba(255, 215, 0, 0.3);">
                        <h3 style="color: #8B0000; margin-bottom: 20px;">üìà Style Evolution</h3>
                        <p>Your style has evolved beautifully over time, showing increased confidence in bold choices!</p>
                    </div>
                    <div style="background: linear-gradient(135deg, rgba(139, 0, 0, 0.1) 0%, rgba(255, 215, 0, 0.1) 100%); 
                               padding: 30px; border-radius: 15px; border: 2px solid rgba(255, 215, 0, 0.3);">
                        <h3 style="color: #8B0000; margin-bottom: 20px;">üé® Color Preferences</h3>
                        <p>You gravitate towards rich, elegant tones that complement your sophisticated style!</p>
                    </div>
                    <div style="background: linear-gradient(135deg, rgba(139, 0, 0, 0.1) 0%, rgba(255, 215, 0, 0.1) 100%); 
                               padding: 30px; border-radius: 15px; border: 2px solid rgba(255, 215, 0, 0.3);">
                        <h3 style="color: #8B0000; margin-bottom: 20px;">üëó Top Combinations</h3>
                        <p>Your most successful outfits blend classic elegance with modern flair!</p>
                    </div>
                </div>
            `;
        }

        async function sendMessage() {
            const input = document.getElementById('chat-input');
            const messages = document.getElementById('chat-messages');
            const userMessage = input.value.trim();
            
            if (!userMessage) return;
            
            // Add user message
            messages.innerHTML += `
                <div style="text-align: right; margin-bottom: 15px;">
                    <div style="background: linear-gradient(45deg, #DAA520, #FFD700); color: #8B0000; padding: 15px; 
                               border-radius: 15px; display: inline-block; max-width: 80%;">
                        <strong>You:</strong><br>${userMessage}
                    </div>
                </div>
            `;
            
            input.value = '';
            messages.scrollTop = messages.scrollHeight;
            
            // Show typing indicator
            const typingId = Date.now();
            messages.innerHTML += `
                <div id="typing-${typingId}" style="background: linear-gradient(45deg, #8B0000, #DC143C); color: #FFD700; padding: 15px; 
                           border-radius: 15px; margin-bottom: 15px; max-width: 80%;">
                    <strong>‚ú® Srusti's Stylist:</strong><br>üí≠ Thinking about your style...
                </div>
            `;
            messages.scrollTop = messages.scrollHeight;
            
            try {
                // Send message to AI API
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ message: userMessage })
                });
                
                const data = await response.json();
                
                // Remove typing indicator
                document.getElementById(`typing-${typingId}`).remove();
                
                // Add AI response
                messages.innerHTML += `
                    <div style="background: linear-gradient(45deg, #8B0000, #DC143C); color: #FFD700; padding: 15px; 
                               border-radius: 15px; margin-bottom: 15px; max-width: 80%;">
                        <strong>‚ú® Srusti's Stylist:</strong><br>${data.response || data.error || 'Sorry, I had trouble understanding that. Could you try again?'}
                    </div>
                `;
                
            } catch (error) {
                console.error('Chat error:', error);
                
                // Remove typing indicator
                document.getElementById(`typing-${typingId}`).remove();
                
                // Show error message
                messages.innerHTML += `
                    <div style="background: linear-gradient(45deg, #8B0000, #DC143C); color: #FFD700; padding: 15px; 
                               border-radius: 15px; margin-bottom: 15px; max-width: 80%;">
                        <strong>‚ú® Srusti's Stylist:</strong><br>‚ú® I'm having a little trouble connecting right now, but I'm still here to help with your style! Your outfits are always so beautiful! üí´
                    </div>
                `;
            }
            
            messages.scrollTop = messages.scrollHeight;
        }

        function getRecommendation() {
            showPage('chat');
            setTimeout(() => {
                document.getElementById('chat-input').value = "What should I wear today?";
                sendMessage();
            }, 500);
        }

        // Chat input enter key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && document.getElementById('chat-input') === document.activeElement) {
                sendMessage();
            }
        });

        // Load initial stats
        async function loadStats() {
            try {
                const response = await fetch('/api/stats');
                const stats = await response.json();
                
                if (stats.success) {
                    document.getElementById('total-outfits').textContent = stats.totalOutfits || 36;
                    document.getElementById('this-month').textContent = stats.thisMonth || 12;
                    document.getElementById('favorite-style').textContent = stats.topStyle || 'Chic';
                    document.getElementById('confidence-score').textContent = stats.avgConfidence || '8.5';
                }
            } catch (error) {
                console.log('Using default stats');
            }
        }

        // Initialize app
        loadStats();
    </script>
</body>
</html>